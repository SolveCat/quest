<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Status krów</title>
<style>
body { font-family: 'Inter', sans-serif; text-align:center; background:#f5f5f5; padding:20px; }
.cow { display:inline-block; width:80px; margin:5px; padding:10px; border-radius:8px; color:white; font-weight:bold; }
.green{background:#4CAF50} .red{background:#f44336} .gray{background:#9e9e9e}
</style>
</head>
<body>
<h1>Status krów</h1>
<div id="cow-container"></div>
<button onclick="window.location='index.html'">← POWRÓT</button>
<script>
const cows = Array.from({length:50},(_,i)=>i+1);
async function loadStatus(){
  const res = await fetch("https://script.google.com/macros/s/AKfycbyW_gVscnVLd4MnXaXAoXWTi0Jmg7eqdMd8AqUyWUZBByxMVc1yU9bsLizede98VFgyCw/exec");
  const data = await res.json();
  const now = new Date().getTime();
  const container = document.getElementById('cow-container');
  cows.forEach(n=>{
    const cowData = data.find(c=>c.id==n);
    let status='gray';
    if(cowData){
      const diff=(now-new Date(cowData.time).getTime())/3600000;
      if(diff<=10) status=cowData.working?'green':'red';
    }
    const div=document.createElement('div');
    div.className=`cow ${status}`;
    div.textContent=`Krowa ${n}`;
    container.appendChild(div);
  });
}
loadStatus();
</script>
</body>
</html>
